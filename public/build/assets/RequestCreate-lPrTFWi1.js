import{T as x,w as V,a as n,b as c,d as a,u as e,_ as r,Z as k,e as i,f as t,t as m,j as q,m as w,F as g,l as C,v as R,k as D,C as v,n as u,i as S,p,Q as y}from"./app-CT_6SLLp.js";import{_ as $}from"./NavLink-CJt-5OEo.js";import{_ as f,a as _}from"./InputLabel-BCwnPG5w.js";import{_ as j}from"./TextInput-DRFeqQmt.js";import{P as M}from"./PrimaryButton-D7jp8EoO.js";import{_ as T}from"./ReqTabs-D5wFQO-N.js";import{o as B}from"./vue-datepicker-CWYaf-xI.js";/* empty css             */import{_ as E}from"./Card-BLrSWe1I.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./GoBackNavLink-BWoQ2R1M.js";const Y={class:"py-8"},F={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},I={class:"card-header !mb-4"},N={class:"grid grid-cols-2 gap-4"},U={selected:"",value:""},z=["value"],P={class:"grid grid-cols-1 gap-4 mt-4"},A={class:"flex items-center justify-end mt-4"},se={__name:"RequestCreate",props:{types:Array},setup(b){const s=x({type:"",date:"",message:""});V(()=>s.type,o=>{o==="leave"&&(s.date="")});const h=()=>{Object.keys(s.date).forEach(function(o){s.date[o]&&!/^\d{4}-\d{2}-\d{2}$/.test(s.date[o])&&(s.date[o]=v(s.date[o]).format("YYYY-MM-DD"))}),console.log(s.date),s.post(route("requests.store"),{preserveScroll:!0,onError:()=>{y().props.errors.past_leave?p().error(y().props.errors.past_leave):p().error(r("Error Creating Request"))},onSuccess:()=>{p().success(r("Request Created Successfully")),s.reset()}})};return(o,d)=>(c(),n(g,null,[a(e(k),{title:e(r)("Request Create")},null,8,["title"]),a($,null,{tabs:i(()=>[a(T)]),default:i(()=>[t("div",Y,[t("div",F,[a(E,{class:"!mt-0"},{default:i(()=>[t("h1",I,m(e(r)("Create a Request")),1),t("form",{onSubmit:q(h,["prevent"])},[t("div",N,[t("div",null,[a(f,{for:"type_id",value:e(r)("Type")},null,8,["value"]),w(t("select",{id:"manager_id",class:"fancy-selector","onUpdate:modelValue":d[0]||(d[0]=l=>e(s).type=l)},[t("option",U,m(e(r)("Choose a Request Type")),1),(c(!0),n(g,null,C(b.types,l=>(c(),n("option",{key:l.id,value:l},m(l),9,z))),128))],512),[[R,e(s).type]]),a(_,{class:"mt-2",message:e(s).errors.type},null,8,["message"])]),t("div",null,[a(f,{for:"date",value:e(r)("Date (Range selection is available)")},null,8,["value"]),a(e(B),{id:"date",modelValue:e(s).date,"onUpdate:modelValue":d[1]||(d[1]=l=>e(s).date=l),class:u(["py-1 block w-full",{"border border-red-500":e(s).errors.date}]),placeholder:e(r)("Select Date..."),"enable-time-picker":!1,"min-date":e(s).type==="leave"?e(v)().tz().format():"",dark:D("isDark").value,range:"",required:""},null,8,["modelValue","class","placeholder","min-date","dark"]),a(_,{class:"mt-2",message:e(s).errors.date},null,8,["message"])])]),t("div",P,[t("div",null,[a(f,{for:"message",value:e(r)("Message")},null,8,["value"]),a(j,{id:"message",type:"text",class:u(["mt-1 block w-full",{"border border-red-500":e(s).errors.message}]),modelValue:e(s).message,"onUpdate:modelValue":d[2]||(d[2]=l=>e(s).message=l),autocomplete:"off",placeholder:e(r)("I will be absent for 3 days because I'm sick.")},null,8,["class","modelValue","placeholder"]),a(_,{class:"mt-2",message:e(s).errors.message},null,8,["message"])])]),t("div",A,[a(M,{class:u(["ltr:ml-4 rtl:mr-4",{"opacity-25":e(s).processing}]),disabled:e(s).processing},{default:i(()=>[S(m(e(r)("Initiate Request")),1)]),_:1},8,["class","disabled"])])],32)]),_:1})])])]),_:1})],64))}};export{se as default};
