import{r as f,C as k,c as H,o as P,w as Z,a as i,b as r,d as o,u as h,Z as G,e as n,f as s,t as u,h as w,F as T,l as A,m as B,z as U,i as Y,a9 as b}from"./app-CT_6SLLp.js";import{_ as J}from"./NavLink-CJt-5OEo.js";import{o as K}from"./vue-datepicker-CWYaf-xI.js";/* empty css             */import{_ as Q}from"./ScheduleTabs-z91zdUdJ.js";import{_ as j}from"./Card-BLrSWe1I.js";import{_ as W,T as X,a as D,b as N}from"./TableRow-aoY5TiV8.js";import{_ as z}from"./FlexButton-BfzYclv0.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Paginator-DHqWFFWu.js";const I={class:"py-8"},ee={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},te={class:"flex justify-between items-center mb-6"},se={class:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6 items-center"},ae={class:"flex items-center gap-2"},le={class:"text-blue-700 text-sm font-medium"},oe={key:0,class:"flex justify-center items-center py-12"},ne={key:1},ie={class:"font-semibold text-gray-900 text-base"},re={class:"text-xs text-gray-500"},de={key:0,class:"inline-flex items-center gap-2 bg-gray-100 rounded-full px-3 py-1 text-sm font-semibold"},ue={class:"flex items-center justify-center bg-blue-900 text-white rounded-full w-7 h-7 font-bold"},ce=["title"],me={key:1,class:"italic text-gray-400 bg-gray-50 rounded px-3 py-1"},pe={key:0},_e={key:0},fe={class:"space-y-2"},ve={class:"font-bold text-gray-900 mr-2"},ge={key:0,class:"text-gray-500 mr-2"},ye={class:"ml-auto text-xs text-gray-400"},be={class:"flex gap-2 mt-2"},xe=["onUpdate:modelValue"],ke=["onUpdate:modelValue"],we={key:0,class:"flex flex-col items-center justify-center py-12"},Me={__name:"AssignTask",setup(he){const m=f(k().format("YYYY-MM-DD")),l=f({}),F=f([]),v=f({}),c=f({}),M=f(!1),L=["Morning","Night"],S=[{label:"Morning",start:"06:00",end:"15:00"},{label:"Night",start:"15:00",end:"00:00"}],R=H(()=>k(m.value).format("dddd, D MMMM YYYY"));async function V(){M.value=!0;const a=k(m.value).format("YYYY-MM-DD"),{data:t}=await b.get("/schedule/day",{params:{date:a}});l.value=t.assignments||{};const e=await b.get("/employees");F.value=e.data.employees||[];for(let p=0;p<2;p++){const _=l.value[p+"_id"];if(_){const x=await b.get("/tasks",{params:{schedule_id:_}});v.value[_]=x.data.tasks}}M.value=!1}P(V),Z(m,V);function C(a){return a&&a.name?a.name:""}function q(a){return a&&a.name?a.name.split(" ").map(t=>t[0]).join("").toUpperCase():""}async function E(a){var e;if(!((e=c.value[a])!=null&&e.title))return;await b.post("/tasks",{schedule_id:a,title:c.value[a].title,description:c.value[a].description||""}),c.value[a]={title:"",description:""};const t=await b.get("/tasks",{params:{schedule_id:a}});v.value[a]=t.data.tasks}return(a,t)=>(r(),i(T,null,[o(h(G),{title:"Assign Task"}),o(J,null,{tabs:n(()=>[o(Q)]),default:n(()=>[s("div",I,[s("div",ee,[o(j,null,{default:n(()=>[s("div",te,[t[2]||(t[2]=s("h1",{class:"text-2xl font-bold"},"Assign Task to Shifts",-1)),o(z,{text:"Today",onClick:t[0]||(t[0]=e=>m.value=h(k)().format("YYYY-MM-DD"))})]),s("div",se,[s("div",ae,[t[3]||(t[3]=s("span",{class:"font-semibold"},"Select Date:",-1)),o(h(K),{modelValue:m.value,"onUpdate:modelValue":t[1]||(t[1]=e=>m.value=e),"enable-time-picker":!1,format:"yyyy-MM-dd",placeholder:"Select a date...",class:"w-full max-w-xs",required:""},null,8,["modelValue"])]),s("div",le,u(R.value),1)])]),_:1}),o(j,{class:"mt-8"},{default:n(()=>[M.value?(r(),i("div",oe,t[4]||(t[4]=[s("svg",{class:"animate-spin h-8 w-8 text-blue-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8z"})],-1)]))):(r(),i("div",ne,[o(W,{totalNumber:2,enablePaginator:!1},{Head:n(()=>[o(N,{class:"bg-gray-100 text-base font-bold text-gray-700 py-4"},{default:n(()=>t[5]||(t[5]=[Y("Shift")])),_:1,__:[5]}),o(N,{class:"bg-gray-100 text-base font-bold text-gray-700 py-4"},{default:n(()=>t[6]||(t[6]=[Y("Staff")])),_:1,__:[6]}),o(N,{class:"bg-gray-100 text-base font-bold text-gray-700 py-4"},{default:n(()=>t[7]||(t[7]=[Y("Tasks")])),_:1,__:[7]})]),Body:n(()=>[(r(),i(T,null,A([0,1],e=>o(X,{key:e,class:"border-b last:border-b-0"},{default:n(()=>[o(D,{class:"py-4 align-top"},{default:n(()=>[s("div",ie,u(L[e]),1),s("div",re,u(S[e].start)+" - "+u(S[e].end),1)]),_:2},1024),o(D,{class:"py-4 align-top"},{default:n(()=>[l.value[e]?(r(),i("span",de,[s("span",ue,u(q(l.value[e])),1),s("span",{class:"text-blue-700 font-semibold",title:C(l.value[e])},u(C(l.value[e])),9,ce)])):(r(),i("span",me,"No Staff Assigned"))]),_:2},1024),o(D,{class:"py-4 align-top"},{default:n(()=>{var p,_,x,$;return[l.value[e+"_id"]?(r(),i("div",pe,[v.value[l.value[e+"_id"]]&&v.value[l.value[e+"_id"]].length?(r(),i("div",_e,[s("ul",fe,[(r(!0),i(T,null,A(v.value[l.value[e+"_id"]],d=>(r(),i("li",{key:d.id,class:"flex items-center bg-gray-50 rounded-full px-4 py-2 text-sm"},[s("span",ve,u(d.title),1),d.description?(r(),i("span",ge,"- "+u(d.description),1)):w("",!0),s("span",ye,"["+u(d.status)+"]",1)]))),128))])])):w("",!0),s("div",be,[B(s("input",{"onUpdate:modelValue":d=>{var g,y;return((g=c.value)[y=l.value[e+"_id"]]??(g[y]={title:"",description:""})).title=d},placeholder:"Task title",class:"border border-gray-300 rounded-full px-4 py-2 text-sm w-32","aria-label":"Task title"},null,8,xe),[[U,((p=c.value)[_=l.value[e+"_id"]]??(p[_]={title:"",description:""})).title]]),B(s("input",{"onUpdate:modelValue":d=>{var g,y;return((g=c.value)[y=l.value[e+"_id"]]??(g[y]={title:"",description:""})).description=d},placeholder:"Description",class:"border border-gray-300 rounded-full px-4 py-2 text-sm w-40","aria-label":"Task description"},null,8,ke),[[U,((x=c.value)[$=l.value[e+"_id"]]??(x[$]={title:"",description:""})).description]]),o(z,{text:"Add",onClick:d=>E(l.value[e+"_id"])},null,8,["onClick"])])])):w("",!0)]}),_:2},1024)]),_:2},1024)),64))]),_:1}),!l.value[0]&&!l.value[1]?(r(),i("div",we,t[8]||(t[8]=[s("svg",{class:"mb-2 w-10 h-10 text-blue-200",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 14v2m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),s("span",{class:"text-gray-400 font-semibold text-base"},"No staff assigned for this date.",-1)]))):w("",!0)]))]),_:1})])])]),_:1})],64))}},Ue=O(Me,[["__scopeId","data-v-23b9bfdb"]]);export{Ue as default};
