import{a as x,b as g,f as m,r as C,T as D,d as e,u as r,_ as t,Z as $,e as s,h as b,t as u,j as y,g as B,n as k,i as l,F as j,p as h}from"./app-CT_6SLLp.js";import{_ as T}from"./NavLink-CJt-5OEo.js";import{_ as A}from"./ReqTabs-D5wFQO-N.js";import{_ as R,X as I}from"./XIcon-Cb_wEdNL.js";import{P as N}from"./PrimaryButton-D7jp8EoO.js";import{S as v}from"./sweetalert2-z6gKu1nJ.js";import{_ as P}from"./Card-BLrSWe1I.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{D as V,_ as n,a as i,b as d}from"./DD-B1xShNRG.js";import{r as W}from"./useRequestTypes-8IzdBrvS.js";import"./GoBackNavLink-BWoQ2R1M.js";const M={name:"CheckIcon"},F={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"green",class:"w-5 h-5"};function O(o,p,f,a,q,w){return g(),x("svg",F,p[0]||(p[0]=[m("path",{"fill-rule":"evenodd",d:"M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z","clip-rule":"evenodd"},null,-1)]))}const Y=E(M,[["render",O]]),z={class:"py-8"},L={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},U={class:"flex justify-between items-center mb-4"},X={class:"card-header mb-2"},J={key:0,class:"flex inline-flex gap-4"},Z={class:"mb-2 ml-1 font-semibold"},ae={__name:"RequestView",props:{request:Object},setup(o){const p=o,f=C(""),a=D({status:"",admin_response:""}),q=()=>{v.mixin({customClass:{cancelButton:"mx-4 text-white bg-red-700 hover:bg-red-800 focus:outline-none focus:ring-4 focus:ring-red-300 font-medium rounded-full text-sm px-5 py-2.5 text-center mr-2 mb-2 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-900",confirmButton:"text-white bg-purple-700 hover:bg-purple-800 focus:outline-none focus:ring-4 focus:ring-purple-300 font-medium rounded-full text-sm px-5 py-2.5 text-center mb-2 dark:bg-purple-600 dark:hover:bg-purple-700 dark:focus:ring-purple-900"},buttonsStyling:!1}).fire({title:t("Are you sure You want to :sth this request?",{sth:f.value}),icon:"warning",showCancelButton:!0,confirmButtonText:t("Confirm"),cancelButtonText:t("Cancel"),inputLabel:f.value===t("reject")?t("(Optional) Provide a reason for rejecting this request:"):"",input:f.value===t("reject")?"textarea":"",inputPlaceholder:f.value===t("reject")?t("We can't accept this leave this week as Mark and Jose will be off and we will be understaffed."):"",reverseButtons:!0}).then(c=>{c.isConfirmed&&(a.admin_response=f.value===t("reject")?c.value:"",a.put(route("requests.update",{id:p.request.id}),{preserveScroll:!0,onError:()=>{h().error(t("Error Updating Request Status"))},onSuccess:()=>{h().success(t("Request Status Updated Successfully"))}}))})},w=()=>{v.mixin({customClass:{confirmButton:"mx-4 text-white bg-red-700 hover:bg-red-800 focus:outline-none focus:ring-4 focus:ring-red-300 font-medium rounded-full text-sm px-5 py-2.5 text-center mr-2 mb-2 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-900",cancelButton:"text-white bg-purple-700 hover:bg-purple-800 focus:outline-none focus:ring-4 focus:ring-purple-300 font-medium rounded-full text-sm px-5 py-2.5 text-center mb-2 dark:bg-purple-600 dark:hover:bg-purple-700 dark:focus:ring-purple-900"},buttonsStyling:!1}).fire({title:t("Are you sure?"),text:t("You won't be able to revert this!"),icon:"warning",showCancelButton:!0,confirmButtonText:t("Yes, Delete!"),cancelButtonText:t("No, Cancel!"),reverseButtons:!0}).then(c=>{c.isConfirmed&&a.delete(route("requests.destroy",{id:p.request.id}),{preserveScroll:!0,onError:()=>{h().error(t("Error Deleting Request"))},onSuccess:()=>{v.fire(t("Request Removed!"),"","success")}})})};return(_,c)=>(g(),x(j,null,[e(r($),{title:r(t)("Request Data")},null,8,["title"]),e(T,null,{tabs:s(()=>[e(A)]),default:s(()=>[m("div",z,[m("div",L,[e(P,{class:"!mt-0"},{default:s(()=>[m("div",null,[m("div",U,[m("h1",X,u(r(t)("Request #:id Data",{id:o.request.id})),1),_.$page.props.auth.user.roles.includes("admin")?(g(),x("div",J,[m("form",{onSubmit:y(q,["prevent"]),class:"flex gap-4"},[o.request.status!=="Approved"?(g(),B(R,{key:0,text:r(t)("Approve Request"),onClick:c[0]||(c[0]=S=>{r(a).status=1,f.value=r(t)("approve")}),class:k({"opacity-25":r(a).processing}),disabled:r(a).processing},{default:s(()=>[e(Y)]),_:1},8,["text","class","disabled"])):b("",!0),o.request.status!=="Rejected"?(g(),B(R,{key:1,text:r(t)("Reject Request"),onClick:c[1]||(c[1]=S=>{r(a).status=2,f.value=r(t)("reject")}),class:k({"opacity-25":r(a).processing}),disabled:r(a).processing},{default:s(()=>[e(I)]),_:1},8,["text","class","disabled"])):b("",!0)],32)])):b("",!0)]),m("h2",Z,u(r(t)("Request Info")),1),e(V,null,{default:s(()=>[e(n,{colored:""},{default:s(()=>[e(i,null,{default:s(()=>[l(u(r(t)("ID")),1)]),_:1}),e(d,null,{default:s(()=>[l(u(o.request.id),1)]),_:1})]),_:1}),e(n,{colored:""},{default:s(()=>[e(i,null,{default:s(()=>[l(u(r(t)("Created By")),1)]),_:1}),e(d,null,{default:s(()=>[l(u(o.request.employee.name),1)]),_:1})]),_:1}),e(n,null,{default:s(()=>[e(i,null,{default:s(()=>[l(u(r(t)("Request Type")),1)]),_:1}),e(d,null,{default:s(()=>[l(u(r(W)[o.request.type]),1)]),_:1})]),_:1}),e(n,null,{default:s(()=>[e(i,null,{default:s(()=>[l(u(r(t)("Request Message")),1)]),_:1}),e(d,null,{default:s(()=>[l(u(o.request.message),1)]),_:1})]),_:1}),e(n,{colored:""},{default:s(()=>[e(i,null,{default:s(()=>[l(u(r(t)("From Date")),1)]),_:1}),e(d,null,{default:s(()=>[l(u(o.request.start_date),1)]),_:1})]),_:1}),e(n,{colored:""},{default:s(()=>[e(i,null,{default:s(()=>[l(u(r(t)("To Date")),1)]),_:1}),e(d,null,{default:s(()=>[l(u(o.request.end_date??r(t)("N/A")),1)]),_:1})]),_:1}),e(n,null,{default:s(()=>[e(i,null,{default:s(()=>[l(u(r(t)("Submission Date")),1)]),_:1}),e(d,null,{default:s(()=>[l(u(new Date(p.request.created_at).toISOString().split("T")[0]),1)]),_:1})]),_:1}),e(n,null,{default:s(()=>[e(i,null,{default:s(()=>[l(u(r(t)("Status")),1)]),_:1}),e(d,null,{default:s(()=>[l(u(o.request.status==="Pending"?r(t)("Pending")+" ⏳":o.request.status==="Approved"?r(t)("Approved")+" ✅":r(t)("Rejected")+" 🚫"),1)]),_:1})]),_:1}),e(n,{colored:""},{default:s(()=>[e(i,null,{default:s(()=>[l(u(r(t)("Admin Response")),1)]),_:1}),e(d,null,{default:s(()=>[l(u(o.request.admin_response??"-"),1)]),_:1})]),_:1}),e(n,{colored:""},{default:s(()=>[e(i),e(d)]),_:1})]),_:1}),_.$page.props.auth.user.roles.includes("admin")?(g(),x("form",{key:0,onSubmit:y(w,["prevent"]),class:"flex justify-end"},[e(N,{class:"bg-red-600 hover:bg-red-700 ml-4 mt-4 focus:bg-red-500 active:bg-red-900"},{default:s(()=>[l(u(r(t)("Delete Request")),1)]),_:1})],32)):b("",!0)])]),_:1})])])]),_:1})],64))}};export{ae as default};
